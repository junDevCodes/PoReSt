---
import '../styles/global.css';

interface Props {
  title?: string;
}

const { title = "Hub" } = Astro.props;
const currentPath = Astro.url.pathname;
---

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title} | Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  </head>
  <body>
    <div class="hub-container">
      <!-- Hub Navigation (Sidebar) -->
      <nav class="hub-nav">
        <a href="/" class="back-link">← 이력서 메인으로</a>
        
        <div class="nav-section">
          <span class="nav-label">Directory</span>
          <a href="/hub" class={currentPath === '/hub' ? 'active' : ''}>대시보드 (Overview)</a>
          <a href="/hub/blog" class={currentPath.startsWith('/hub/blog') ? 'active' : ''}>학습 기록 (TIL)</a>
          <a href="/hub/knowledge" class={currentPath.startsWith('/hub/knowledge') ? 'active' : ''}>지식 그래프 (Knowledge)</a>
        </div>

        <div class="nav-section">
          <span class="nav-label">Utilities</span>
          <a href="/hub/bookmarks" class={currentPath.startsWith('/hub/bookmarks') ? 'active' : ''}>북마크 (Bookmarks)</a>
          <a href="/hub/timeline" class={currentPath.startsWith('/hub/timeline') ? 'active' : ''}>타임라인 (Timeline)</a>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="hub-main">
        <div class="content-wrapper">
          <header class="page-title-block">
            <h1>{title}</h1>
          </header>
          <slot />
        </div>
      </main>
    </div>
  </body>
</html>

<style>
  .hub-container {
    display: flex;
    min-height: 100vh;
  }

  /* Sidebar */
  .hub-nav {
    width: 260px;
    background: var(--c-paper);
    border-right: 1px solid var(--c-border);
    padding: 2rem 1.5rem;
    flex-shrink: 0;
    position: sticky;
    top: 0;
    height: 100vh;
    overflow-y: auto;
  }

  .back-link {
    display: block;
    margin-bottom: 2rem;
    font-size: 0.9rem;
    color: var(--c-ink-light);
    font-family: var(--font-mono);
  }

  .nav-section { margin-bottom: 2rem; display: flex; flex-direction: column; gap: 0.5rem; }
  .nav-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    font-weight: 700;
    color: var(--c-navy);
    margin-bottom: 0.5rem;
    letter-spacing: 0.05em;
  }

  .nav-section a {
    color: var(--c-ink);
    font-size: 0.95rem;
    padding: 4px 0;
  }
  .nav-section a:hover { color: var(--c-blue); }
  .nav-section a.active {
    font-weight: 600;
    color: var(--c-blue);
    border-right: 3px solid var(--c-blue);
  }

  /* Main Content */
  .hub-main {
    flex: 1;
    background: white; /* Contrast with paper sidebar */
  }

  .content-wrapper {
    max-width: 800px;
    margin: 0 auto;
    padding: 3rem 2rem;
  }

  .page-title-block {
    margin-bottom: 3rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }
  .page-title-block h1 { margin: 0; font-size: 1.8rem; }

  @media (max-width: 768px) {
    .hub-container { flex-direction: column; }
    .hub-nav {
      width: 100%;
      height: auto;
      border-right: none;
      border-bottom: 1px solid var(--c-border);
      position: relative;
    }
  }
</style>
